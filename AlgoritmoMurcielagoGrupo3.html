<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algoritmo de Murci√©lagos - Grupo 3</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            color: #ffffff;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 40px 0;
            background: linear-gradient(45deg, #533483, #8e44ad);
            border-radius: 20px;
            margin-bottom: 40px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            position: relative;
            z-index: 2;
        }

        .header p {
            font-size: 1.3em;
            opacity: 0.9;
            position: relative;
            z-index: 2;
        }

        .bat-decoration {
            position: absolute;
            font-size: 2em;
            opacity: 0.1;
            animation: flyAround 15s linear infinite;
            z-index: 1;
        }

        @keyframes flyAround {
            0% { transform: translate(-50px, -50px); }
            25% { transform: translate(calc(100% + 50px), -50px); }
            50% { transform: translate(calc(100% + 50px), calc(100% + 50px)); }
            75% { transform: translate(-50px, calc(100% + 50px)); }
            100% { transform: translate(-50px, -50px); }
        }

        .nav-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 10px;
            backdrop-filter: blur(10px);
            flex-wrap: wrap;
        }

        .nav-tab {
            background: rgba(255,255,255,0.1);
            border: none;
            color: white;
            padding: 15px 30px;
            margin: 5px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-tab:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }

        .nav-tab.active {
            background: linear-gradient(45deg, #e74c3c, #f39c12);
            box-shadow: 0 5px 15px rgba(231,76,60,0.4);
        }

        .section {
            display: none;
            background: rgba(255,255,255,0.05);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            animation: fadeIn 0.5s ease-in-out;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section h2 {
            font-size: 2.5em;
            margin-bottom: 30px;
            color: #f39c12;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .theory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .theory-card {
            background: linear-gradient(135deg, rgba(52,152,219,0.2), rgba(155,89,182,0.2));
            padding: 25px;
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .theory-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .theory-card h3 {
            color: #3498db;
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        .algorithm-steps {
            background: linear-gradient(135deg, rgba(46,204,113,0.2), rgba(39,174,96,0.2));
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .step {
            margin: 15px 0;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-left: 4px solid #2ecc71;
            border-radius: 5px;
            transition: transform 0.3s ease;
        }

        .step:hover {
            transform: translateX(5px);
        }

        .step strong {
            color: #2ecc71;
        }

        .canvas-container {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            margin: 20px 0;
            border: 2px solid rgba(255,255,255,0.1);
            position: relative;
        }

        canvas {
            max-width: 100%;
            height: auto;
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 10px;
            background: linear-gradient(45deg, #2c3e50, #34495e);
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
        }

        .controls {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .control-btn {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            border: none;
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 120px;
            justify-content: center;
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(231,76,60,0.4);
        }

        .control-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .parameters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .param-group {
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 10px;
        }

        .param-group label {
            display: block;
            margin-bottom: 5px;
            color: #ecf0f1;
        }

        .param-group input {
            width: 100%;
            padding: 8px;
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 5px;
            background: rgba(255,255,255,0.1);
            color: white;
        }

        .formula {
            background: rgba(52,73,94,0.3);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            border-left: 4px solid #3498db;
            overflow-x: auto;
        }

        .highlight {
            color: #f39c12;
            font-weight: bold;
        }

        .bat-icon {
            font-size: 3em;
            margin: 0 10px;
            animation: fly 2s ease-in-out infinite alternate;
        }

        @keyframes fly {
            from { transform: translateY(0px) rotate(-5deg); }
            to { transform: translateY(-10px) rotate(5deg); }
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: scale(1.05);
        }

        .stat-value {
            font-size: 1.5em;
            color: #f39c12;
            font-weight: bold;
        }

        .convergence-chart {
            width: 100%;
            height: 200px;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            margin-top: 20px;
            position: relative;
            overflow: hidden;
        }

        .chart-line {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 2px;
            background: #f39c12;
            width: 100%;
        }

        .chart-point {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #e74c3c;
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }

        .function-selector {
            margin-bottom: 20px;
            text-align: center;
        }

        .function-btn {
            background: rgba(255,255,255,0.1);
            border: none;
            color: white;
            padding: 10px 20px;
            margin: 0 5px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .function-btn.active {
            background: linear-gradient(45deg, #3498db, #9b59b6);
        }

        .function-btn:hover {
            background: rgba(255,255,255,0.2);
        }

        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
            border-bottom: 1px dotted #3498db;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #2c3e50;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.9em;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            box-sizing: border-box;
        }

        .modal-content {
            background-color: #2c3e50;
            padding: 30px;
            border-radius: 15px;
            max-width: 600px;
            max-height: 80vh;
            overflow: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .header p {
                font-size: 1em;
            }
            
            .nav-tab {
                padding: 10px 15px;
                font-size: 0.9em;
            }
            
            .section {
                padding: 20px;
            }
            
            .section h2 {
                font-size: 1.8em;
            }
            
            .parameters {
                grid-template-columns: 1fr;
            }

            .function-btn {
                margin: 5px;
                padding: 8px 15px;
                font-size: 0.9em;
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 30px 0;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .control-btn {
                width: 100%;
                justify-content: center;
            }

            .modal-content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="bat-decoration">ü¶á</div>
            <div class="bat-decoration" style="top: 20%; left: 80%; animation-delay: 2s;">ü¶á</div>
            <div class="bat-decoration" style="top: 70%; left: 30%; animation-delay: 4s;">ü¶á</div>
            <h1>ü¶á Algoritmo de Murci√©lagos ü¶á</h1>
            <p>Optimizaci√≥n Bio-inspirada mediante Eco-localizaci√≥n</p>
            <div class="bat-icon">ü¶á</div>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="mostrarSeccion('theory')">üìö Teor√≠a</button>
            <button class="nav-tab" onclick="mostrarSeccion('practice')">‚öôÔ∏è Pr√°ctica</button>
            <button class="nav-tab" onclick="mostrarSeccion('visualization')">üéØ Visualizaci√≥n</button>
            <button class="nav-tab" onclick="mostrarSeccion('video')">üé• Video</button>
        </div>
            <!-- Agrega esto dentro de tu archivo principal, justo despu√©s de las otras secciones --><div id="video" class="section">
    <h2>üé• Demostraci√≥n en Video</h2>
    <div class="canvas-container">
        <div id="player" style="width: 100%; max-width: 800px; height: 450px; margin: 0 auto;"></div>
    </div>
</div>

        <div id="theory" class="section active">
            <h2>üìö Fundamentos Te√≥ricos</h2>
            
            <div class="theory-grid">
                <div class="theory-card">
                    <h3>üéØ ¬øQu√© es el Algoritmo de Murci√©lagos?</h3>
                    <p>El Algoritmo de Murci√©lagos (BA - Bat Algorithm) es un algoritmo metaheur√≠stico de optimizaci√≥n desarrollado por <span class="highlight">Xin-She Yang en 2010</span>. Se inspira en el comportamiento de eco-localizaci√≥n de los murci√©lagos microquir√≥pteros para encontrar soluciones √≥ptimas en espacios de b√∫squeda complejos.</p>
                </div>

                <div class="theory-card">
                    <h3>üîä Eco-localizaci√≥n Natural</h3>
                    <p>Los murci√©lagos emiten pulsos ultras√≥nicos y escuchan los ecos que regresan para:</p>
                    <ul style="margin-top: 10px;">
                        <li>‚Ä¢ Detectar obst√°culos</li>
                        <li>‚Ä¢ Localizar presas</li>
                        <li>‚Ä¢ Navegar en la oscuridad</li>
                        <li>‚Ä¢ Determinar distancias y tama√±os</li>
                    </ul>
                </div>

                <div class="theory-card">
                    <h3>‚ö° Caracter√≠sticas Principales</h3>
                    <ul>
                        <li>‚Ä¢ <span class="highlight">Frecuencia variable:</span> Ajuste din√°mico de par√°metros</li>
                        <li>‚Ä¢ <span class="highlight">Velocidad adaptativa:</span> Control de intensidad de b√∫squeda</li>
                        <li>‚Ä¢ <span class="highlight">B√∫squeda local/global:</span> Equilibrio exploraci√≥n-explotaci√≥n</li>
                        <li>‚Ä¢ <span class="highlight">Convergencia r√°pida:</span> Eficiencia computacional</li>
                    </ul>
                </div>

                <div class="theory-card">
                    <h3>üìä Par√°metros del Algoritmo</h3>
                    <div class="formula">
                        <strong>Frecuencia:</strong> f<sub>i</sub> = f<sub>min</sub> + (f<sub>max</sub> - f<sub>min</sub>) √ó Œ≤<br>
                        <strong>Velocidad:</strong> v<sub>i</sub><sup>t+1</sup> = v<sub>i</sub><sup>t</sup> + (x<sub>i</sub><sup>t</sup> - x<sub>best</sub>) √ó f<sub>i</sub><br>
                        <strong>Posici√≥n:</strong> x<sub>i</sub><sup>t+1</sup> = x<sub>i</sub><sup>t</sup> + v<sub>i</sub><sup>t+1</sup>
                    </div>
                    <p><strong>Donde:</strong> Œ≤ ‚àà [0,1] es un n√∫mero aleatorio, f<sub>i</sub> es la frecuencia, v<sub>i</sub> es la velocidad, x<sub>i</sub> es la posici√≥n.</p>
                </div>

                <div class="theory-card">
                    <h3>üéØ Ventajas del Algoritmo</h3>
                    <ul>
                        <li>‚Ä¢ <span class="highlight">Simplicidad:</span> Pocos par√°metros de control</li>
                        <li>‚Ä¢ <span class="highlight">Flexibilidad:</span> Adaptable a diversos problemas</li>
                        <li>‚Ä¢ <span class="highlight">Eficiencia:</span> Convergencia r√°pida</li>
                        <li>‚Ä¢ <span class="highlight">Robustez:</span> Manejo de funciones multimodales</li>
                    </ul>
                </div>

                <div class="theory-card">
                    <h3>üî¨ Aplicaciones</h3>
                    <ul>
                        <li>‚Ä¢ Optimizaci√≥n de funciones continuas</li>
                        <li>‚Ä¢ Problemas de ingenier√≠a</li>
                        <li>‚Ä¢ Dise√±o de redes neuronales</li>
                        <li>‚Ä¢ Planificaci√≥n de rutas</li>
                        <li>‚Ä¢ Optimizaci√≥n de recursos</li>
                    </ul>
                </div>
            </div>
        </div>

        <div id="practice" class="section">
            <h2>‚öôÔ∏è Implementaci√≥n Pr√°ctica</h2>
            
            <div class="algorithm-steps">
                <h3>üîÑ Pasos del Algoritmo</h3>
                
                <div class="step">
                    <strong>Paso 1 - Inicializaci√≥n:</strong>
                    <p>Generar poblaci√≥n inicial de N murci√©lagos con posiciones y velocidades aleatorias. Definir frecuencias f<sub>min</sub> y f<sub>max</sub>, tasa de pulso r y intensidad A.</p>
                </div>

                <div class="step">
                    <strong>Paso 2 - Evaluaci√≥n:</strong>
                    <p>Evaluar la funci√≥n objetivo para cada murci√©lago y encontrar la mejor soluci√≥n x<sub>best</sub>.</p>
                </div>

                <div class="step">
                    <strong>Paso 3 - Actualizaci√≥n de Frecuencia:</strong>
                    <p>Para cada murci√©lago i, generar nueva frecuencia: f<sub>i</sub> = f<sub>min</sub> + (f<sub>max</sub> - f<sub>min</sub>) √ó Œ≤</p>
                </div>

                <div class="step">
                    <strong>Paso 4 - Actualizaci√≥n de Velocidad y Posici√≥n:</strong>
                    <p>Actualizar velocidad y posici√≥n usando las ecuaciones de movimiento basadas en la frecuencia.</p>
                </div>

                <div class="step">
                    <strong>Paso 5 - B√∫squeda Local:</strong>
                    <p>Si rand > r<sub>i</sub>, seleccionar una soluci√≥n entre las mejores y generar nueva soluci√≥n local alrededor de ella.</p>
                </div>

                <div class="step">
                    <strong>Paso 6 - Aceptaci√≥n:</strong>
                    <p>Si rand < A<sub>i</sub> y f(x<sub>i</sub>) < f(x<sub>best</sub>), aceptar la nueva soluci√≥n y actualizar r<sub>i</sub> y A<sub>i</sub>.</p>
                </div>

                <div class="step">
                    <strong>Paso 7 - Iteraci√≥n:</strong>
                    <p>Repetir pasos 3-6 hasta alcanzar el criterio de parada (m√°ximo de iteraciones o convergencia).</p>
                </div>
            </div>

            <div class="theory-card">
                <h3>üíª Pseudoc√≥digo</h3>
                <div class="formula">
<pre>
ALGORITMO Murci√©lagosOptimizaci√≥n
ENTRADA: N (poblaci√≥n), T (iteraciones m√°ximas)
SALIDA: x_best (mejor soluci√≥n)

1. Inicializar poblaci√≥n de murci√©lagos x_i, v_i
2. Definir frecuencias f_min, f_max
3. Inicializar r_i y A_i para cada murci√©lago
4. Evaluar funci√≥n objetivo y encontrar x_best

MIENTRAS t < T HACER:
    PARA cada murci√©lago i HACER:
        Generar nueva frecuencia f_i
        Actualizar velocidad v_i
        Actualizar posici√≥n x_i
        
        SI rand > r_i ENTONCES:
            Generar soluci√≥n local alrededor de x_best
        FIN SI
        
        SI rand < A_i Y f(x_i) < f(x_best) ENTONCES:
            Aceptar nueva soluci√≥n
            Incrementar r_i, decrementar A_i
        FIN SI
        
        Evaluar nuevas soluciones
        Actualizar x_best
    FIN PARA
    t = t + 1
FIN MIENTRAS

RETORNAR x_best
</pre>
                </div>
            </div>

            <div class="theory-grid">
                <div class="theory-card">
                    <h3>üéõÔ∏è Par√°metros Clave</h3>
                    <ul>
                        <li>‚Ä¢ <strong>N:</strong> Tama√±o poblaci√≥n (20-40)</li>
                        <li>‚Ä¢ <strong>A:</strong> Intensidad inicial (0.5-2.0)</li>
                        <li>‚Ä¢ <strong>r:</strong> Tasa de pulso (0.1-0.9)</li>
                        <li>‚Ä¢ <strong>f_min:</strong> Frecuencia m√≠nima (0)</li>
                        <li>‚Ä¢ <strong>f_max:</strong> Frecuencia m√°xima (2)</li>
                        <li>‚Ä¢ <strong>Œ±, Œ≥:</strong> Constantes (‚âà0.9)</li>
                    </ul>
                </div>

                <div class="theory-card">
                    <h3>‚öñÔ∏è Balance Exploraci√≥n-Explotaci√≥n</h3>
                    <p><strong>Exploraci√≥n (Global):</strong></p>
                    <ul>
                        <li>‚Ä¢ Frecuencias altas ‚Üí movimientos largos</li>
                        <li>‚Ä¢ Intensidad alta ‚Üí b√∫squeda amplia</li>
                    </ul>
                    <p><strong>Explotaci√≥n (Local):</strong></p>
                    <ul>
                        <li>‚Ä¢ Frecuencias bajas ‚Üí movimientos cortos</li>
                        <li>‚Ä¢ Intensidad baja ‚Üí refinamiento</li>
                    </ul>
                </div>
            </div>
        </div>

        <div id="visualization" class="section">
            <h2>üéØ Visualizaci√≥n en Tiempo Real</h2>
            
            <div class="function-selector">
                <button class="function-btn active" onclick="cambiarFuncionObjetivo('rastrigin')">Rastrigin</button>
                <button class="function-btn" onclick="cambiarFuncionObjetivo('sphere')">Sphere</button>
                <button class="function-btn" onclick="cambiarFuncionObjetivo('ackley')">Ackley</button>
                <button class="function-btn" onclick="cambiarFuncionObjetivo('rosenbrock')">Rosenbrock</button>
                <button class="function-btn" onclick="cambiarFuncionObjetivo('griewank')">Griewank</button>
            </div>
            
            <div class="canvas-container">
                <h3 id="function-title">Optimizaci√≥n de la Funci√≥n de Rastrigin</h3>
                <p>Observa c√≥mo los murci√©lagos (puntos azules) usan eco-localizaci√≥n para encontrar el √≥ptimo global (punto rojo)</p>
                <canvas id="optimizationCanvas" width="800" height="500"></canvas>
                
                <div class="controls">
                    <button class="control-btn" onclick="iniciarAnimacion()" id="startBtn">‚ñ∂Ô∏è Iniciar</button>
                    <button class="control-btn" onclick="pausarAnimacion()" id="pauseBtn">‚è∏Ô∏è Pausar</button>
                    <button class="control-btn" onclick="reiniciarAnimacion()">üîÑ Reiniciar</button>
                    <button class="control-btn" onclick="alternarRastros()">üé® Rastros</button>
                    <button class="control-btn" onclick="mostrarInfoAlgoritmo()">‚ÑπÔ∏è Info</button>
                    <button class="control-btn" onclick="exportarDatos()">üìä Exportar</button>
                </div>

                <div class="parameters">
                    <div class="param-group">
                        <label>Poblaci√≥n (N): <span class="tooltip">?
                            <span class="tooltiptext">N√∫mero de murci√©lagos en la poblaci√≥n</span>
                        </span></label>
                        <input type="range" id="population" min="10" max="50" value="25" onchange="actualizarParametro('population', this.value)">
                        <span id="populationValue">25</span>
                    </div>
                    <div class="param-group">
                        <label>Intensidad (A): <span class="tooltip">?
                            <span class="tooltiptext">Intensidad inicial del pulso sonoro</span>
                        </span></label>
                        <input type="range" id="intensity" min="0.1" max="2" step="0.1" value="1" onchange="actualizarParametro('intensity', this.value)">
                        <span id="intensityValue">1.0</span>
                    </div>
                    <div class="param-group">
                        <label>Tasa Pulso (r): <span class="tooltip">?
                            <span class="tooltiptext">Tasa de emisi√≥n de pulsos</span>
                        </span></label>
                        <input type="range" id="pulseRate" min="0.1" max="0.9" step="0.1" value="0.5" onchange="actualizarParametro('pulseRate', this.value)">
                        <span id="pulseRateValue">0.5</span>
                    </div>
                    <div class="param-group">
                        <label>Freq. M√°xima: <span class="tooltip">?
                            <span class="tooltiptext">Frecuencia m√°xima de emisi√≥n</span>
                        </span></label>
                        <input type="range" id="maxFreq" min="1" max="5" step="0.5" value="2" onchange="actualizarParametro('maxFreq', this.value)">
                        <span id="maxFreqValue">2.0</span>
                    </div>
                </div>

                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-value" id="iteration">0</div>
                        <div>Iteraci√≥n</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="bestFitness">‚àû</div>
                        <div>Mejor Fitness</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="avgIntensity">1.0</div>
                        <div>Intensidad Promedio</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="convergence">0%</div>
                        <div>Convergencia</div>
                    </div>
                </div>

                <div class="convergence-chart" id="convergenceChart">
                    <div class="chart-line"></div>
                    <!-- Los puntos del gr√°fico se generar√°n din√°micamente -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para informaci√≥n -->
    <div id="infoModal" class="modal">
        <div class="modal-content">
            <button class="close-modal" onclick="cerrarModal()">√ó</button>
            <h3 id="modalTitle">Informaci√≥n del Algoritmo</h3>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        // Variables globales
        let lienzo, contexto;
        let idAnimacion;
        let estaEjecutando = false;
        let mostrarRastros = false;
        let iteracion = 0;
        let cacheMapaCalor = null;
        let tiempoUltimoFotograma = 0;
        let contadorFotogramas = 0;
        let fotogramasPorSegundo = 0;
        let ultimoTiempo = 0;
        let historialConvergencia = [];
        const MAX_HISTORIAL = 100;
        
        // Par√°metros del algoritmo
        let parametros = {
            population: 25,
            intensity: 1.0,
            pulseRate: 0.5,
            maxFreq: 2.0,
            minFreq: 0.0,
            alpha: 0.9,
            gamma: 0.9,
            dimensions: 2,
            currentFunction: 'rastrigin'
        };

        // Poblaci√≥n de murci√©lagos
        let murcielagos = [];
        let mejorMurcielago = null;
        let mejorFitness = Infinity;

        // Funciones objetivo
        const funcionesObjetivo = {
            rastrigin: {
                nombre: "Rastrigin",
                funcion: (x, y) => {
                    const A = 10;
                    const n = 2;
                    return A * n + (x*x - A * Math.cos(2 * Math.PI * x)) + (y*y - A * Math.cos(2 * Math.PI * y));
                },
                optimo: {x: 0, y: 0},
                limite: 5
            },
            sphere: {
                nombre: "Sphere",
                funcion: (x, y) => x*x + y*y,
                optimo: {x: 0, y: 0},
                limite: 5
            },
            ackley: {
                nombre: "Ackley",
                funcion: (x, y) => {
                    const a = 20;
                    const b = 0.2;
                    const c = 2 * Math.PI;
                    const d = 2;
                    
                    const termino1 = -a * Math.exp(-b * Math.sqrt((x*x + y*y) / d));
                    const termino2 = -Math.exp((Math.cos(c * x) + Math.cos(c * y)) / d);
                    return termino1 + termino2 + a + Math.exp(1);
                },
                optimo: {x: 0, y: 0},
                limite: 5
            },
            rosenbrock: {
                nombre: "Rosenbrock",
                funcion: (x, y) => {
                    const a = 1;
                    const b = 100;
                    return Math.pow(a - x, 2) + b * Math.pow(y - x*x, 2);
                },
                optimo: {x: 1, y: 1},
                limite: 2
            },
            griewank: {
                nombre: "Griewank",
                funcion: (x, y) => {
                    return (x*x + y*y)/4000 - Math.cos(x) * Math.cos(y/Math.sqrt(2)) + 1;
                },
                optimo: {x: 0, y: 0},
                limite: 10
            }
        };

        // Inicializaci√≥n
        window.onload = function() {
            lienzo = document.getElementById('optimizationCanvas');
            contexto = lienzo.getContext('2d');
            
            // Ajustar tama√±o del lienzo para pantallas peque√±as
            ajustarTamanoLienzo();
            
            inicializarMurcielagos();
            dibujarVisualizacion();
            
            // Inicializar tooltips
            inicializarTooltips();
        };

        // Ajustar tama√±o del lienzo seg√∫n el dispositivo
        function ajustarTamanoLienzo() {
            if (window.innerWidth < 800) {
                lienzo.width = Math.min(800, window.innerWidth - 40);
                lienzo.height = lienzo.width * 0.625;
            } else {
                lienzo.width = 800;
                lienzo.height = 500;
            }
            cacheMapaCalor = null; // Invalidar cach√©
        }

        // Cambiar funci√≥n objetivo
        function cambiarFuncionObjetivo(nombreFuncion) {
            parametros.currentFunction = nombreFuncion;
            
            // Actualizar botones
            document.querySelectorAll('.function-btn').forEach(boton => {
                boton.classList.remove('active');
                if (boton.textContent.toLowerCase() === nombreFuncion) {
                    boton.classList.add('active');
                }
            });
            
            // Actualizar t√≠tulo
            document.getElementById('function-title').textContent = 
                `Optimizaci√≥n de la Funci√≥n de ${funcionesObjetivo[nombreFuncion].nombre}`;
            
            // Reiniciar simulaci√≥n
            reiniciarAnimacion();
        }

        // Clase Murci√©lago
        class Murcielago {
            constructor() {
                const limite = funcionesObjetivo[parametros.currentFunction].limite;
                this.posicion = {
                    x: (Math.random() - 0.5) * limite * 2,
                    y: (Math.random() - 0.5) * limite * 2
                };
                this.velocidad = {
                    x: (Math.random() - 0.5) * 2,
                    y: (Math.random() - 0.5) * 2
                };
                this.frecuencia = 0;
                this.intensidad = parametros.intensity;
                this.tasaPulso = parametros.pulseRate;
                this.fitness = this.evaluarFitness();
                this.rastro = [];
                this.edad = 0;
            }

            evaluarFitness() {
                return funcionesObjetivo[parametros.currentFunction].funcion(this.posicion.x, this.posicion.y);
            }

            actualizarPosicion() {
                this.edad++;
                
                // Generar nueva frecuencia
                this.frecuencia = parametros.minFreq + (parametros.maxFreq - parametros.minFreq) * Math.random();
                
                if (mejorMurcielago) {
                    // Actualizar velocidad
                    this.velocidad.x += (this.posicion.x - mejorMurcielago.posicion.x) * this.frecuencia;
                    this.velocidad.y += (this.posicion.y - mejorMurcielago.posicion.y) * this.frecuencia;
                    
                    // Inercia basada en edad (los murci√©lagos m√°s viejos son m√°s conservadores)
                    const inercia = Math.min(1, this.edad / 100);
                    this.velocidad.x *= (0.9 + inercia * 0.1);
                    this.velocidad.y *= (0.9 + inercia * 0.1);
                }

                // Actualizar posici√≥n
                this.posicion.x += this.velocidad.x;
                this.posicion.y += this.velocidad.y;

                // Limitar a los bordes seg√∫n la funci√≥n
                const limite = funcionesObjetivo[parametros.currentFunction].limite;
                this.posicion.x = Math.max(-limite, Math.min(limite, this.posicion.x));
                this.posicion.y = Math.max(-limite, Math.min(limite, this.posicion.y));

                // B√∫squeda local
                if (Math.random() > this.tasaPulso && mejorMurcielago) {
                    const epsilon = (Math.random() - 0.5) * 0.1;
                    this.posicion.x = mejorMurcielago.posicion.x + epsilon;
                    this.posicion.y = mejorMurcielago.posicion.y + epsilon;
                }

                // Evaluar nueva posici√≥n
                const nuevoFitness = this.evaluarFitness();
                
                // Aceptar si es mejor y probabil√≠stico
                if (Math.random() < this.intensidad && nuevoFitness < this.fitness) {
                    this.fitness = nuevoFitness;
                    this.tasaPulso = Math.min(0.9, this.tasaPulso * (1 + parametros.gamma));
                    this.intensidad *= parametros.alpha;
                }

                // Agregar al rastro
                if (mostrarRastros && this.rastro.length < 20) {
                    this.rastro.push({x: this.posicion.x, y: this.posicion.y});
                } else if (mostrarRastros) {
                    this.rastro.shift();
                    this.rastro.push({x: this.posicion.x, y: this.posicion.y});
                }
            }

            dibujar() {
                const optimo = funcionesObjetivo[parametros.currentFunction].optimo;
                const limite = funcionesObjetivo[parametros.currentFunction].limite;
                const escalaX = lienzo.width / (limite * 2);
                const escalaY = lienzo.height / (limite * 2);
                
                const pantallaX = (this.posicion.x + limite) * escalaX;
                const pantallaY = (this.posicion.y + limite) * escalaY;

                // Dibujar rastro
                if (mostrarRastros && this.rastro.length > 1) {
                    contexto.strokeStyle = 'rgba(52, 152, 219, 0.3)';
                    contexto.lineWidth = 1;
                    contexto.beginPath();
                    for (let i = 0; i < this.rastro.length - 1; i++) {
                        const rastroX = (this.rastro[i].x + limite) * escalaX;
                        const rastroY = (this.rastro[i].y + limite) * escalaY;
                        if (i === 0) contexto.moveTo(rastroX, rastroY);
                        else contexto.lineTo(rastroX, rastroY);
                    }
                    contexto.stroke();
                }

                // Dibujar murci√©lago
                contexto.fillStyle = this === mejorMurcielago ? '#e74c3c' : '#3498db';
                contexto.beginPath();
                contexto.arc(pantallaX, pantallaY, this === mejorMurcielago ? 8 : 5, 0, 2 * Math.PI);
                contexto.fill();

                // Dibujar ondas de eco-localizaci√≥n ocasionalmente
                if (Math.random() < 0.1) {
                    for (let i = 1; i <= 3; i++) {
                        contexto.strokeStyle = `rgba(52, 152, 219, ${0.3 / i})`;
                        contexto.lineWidth = 1;
                        contexto.beginPath();
                        contexto.arc(pantallaX, pantallaY, i * 15, 0, 2 * Math.PI);
                        contexto.stroke();
                    }
                }
            }
        }

        // Inicializar poblaci√≥n
        function inicializarMurcielagos() {
            murcielagos = [];
            for (let i = 0; i < parametros.population; i++) {
                murcielagos.push(new Murcielago());
            }
            encontrarMejorMurcielago();
            historialConvergencia = [];
        }

        // Encontrar mejor murci√©lago
        function encontrarMejorMurcielago() {
            mejorFitness = Infinity;
            mejorMurcielago = null;
            
            for (let murcielago of murcielagos) {
                if (murcielago.fitness < mejorFitness) {
                    mejorFitness = murcielago.fitness;
                    mejorMurcielago = murcielago;
                }
            }
            
            // Registrar en el historial de convergencia
            if (historialConvergencia.length >= MAX_HISTORIAL) {
                historialConvergencia.shift();
            }
            historialConvergencia.push(mejorFitness);
            
            actualizarGraficoConvergencia();
        }

        // Dibujar funci√≥n de fondo (mapa de calor)
        function dibujarFondo() {
            // Usar cach√© para mejorar rendimiento
            if (!cacheMapaCalor || !mostrarRastros) {
                cacheMapaCalor = document.createElement('canvas');
                cacheMapaCalor.width = lienzo.width;
                cacheMapaCalor.height = lienzo.height;
                const contextoCache = cacheMapaCalor.getContext('2d');
                
                const datosImagen = contextoCache.createImageData(lienzo.width, lienzo.height);
                const optimo = funcionesObjetivo[parametros.currentFunction].optimo;
                const limite = funcionesObjetivo[parametros.currentFunction].limite;
                const escalaX = lienzo.width / (limite * 2);
                const escalaY = lienzo.height / (limite * 2);
                
                for (let x = 0; x < lienzo.width; x++) {
                    for (let y = 0; y < lienzo.height; y++) {
                        const realX = (x / escalaX) - limite;
                        const realY = (y / escalaY) - limite;
                        const valor = funcionesObjetivo[parametros.currentFunction].funcion(realX, realY);
                        
                        // Normalizar valor para color seg√∫n la funci√≥n
                        let valorNormalizado;
                        switch(parametros.currentFunction) {
                            case 'rastrigin':
                                valorNormalizado = Math.min(valor / 50, 1);
                                break;
                            case 'ackley':
                                valorNormalizado = Math.min(valor / 10, 1);
                                break;
                            case 'rosenbrock':
                                valorNormalizado = Math.min(valor / 1000, 1);
                                break;
                            case 'griewank':
                                valorNormalizado = Math.min(valor / 5, 1);
                                break;
                            default: // sphere
                                valorNormalizado = Math.min(valor / 50, 1);
                        }
                        
                        const rojo = Math.floor(255 * valorNormalizado);
                        const verde = Math.floor(100 * (1 - valorNormalizado));
                        const azul = Math.floor(150 * (1 - valorNormalizado));
                        
                        const indice = (y * lienzo.width + x) * 4;
                        datosImagen.data[indice] = rojo;     // R
                        datosImagen.data[indice + 1] = verde; // G
                        datosImagen.data[indice + 2] = azul;  // B
                        datosImagen.data[indice + 3] = 50;  // A (transparencia)
                    }
                }
                contextoCache.putImageData(datosImagen, 0, 0);
                
                // Dibujar √≥ptimo global
                const optimoX = (optimo.x + limite) * escalaX;
                const optimoY = (optimo.y + limite) * escalaY;
                contextoCache.fillStyle = '#f39c12';
                contextoCache.beginPath();
                contextoCache.arc(optimoX, optimoY, 10, 0, 2 * Math.PI);
                contextoCache.fill();
                
                // Dibujar estrella en el √≥ptimo
                contextoCache.fillStyle = '#fff';
                contextoCache.font = '16px Arial';
                contextoCache.textAlign = 'center';
                contextoCache.fillText('‚òÖ', optimoX, optimoY + 5);
            }
            
            // Dibujar desde cach√©
            contexto.drawImage(cacheMapaCalor, 0, 0);
        }

        // Dibujar visualizaci√≥n completa
        function dibujarVisualizacion(tiempo) {
            // Calcular FPS
            contadorFotogramas++;
            if (tiempo - ultimoTiempo >= 1000) {
                fotogramasPorSegundo = contadorFotogramas;
                contadorFotogramas = 0;
                ultimoTiempo = tiempo;
            }
            
            // Limpiar lienzo
            contexto.fillStyle = '#2c3e50';
            contexto.fillRect(0, 0, lienzo.width, lienzo.height);

            // Dibujar funci√≥n de fondo cada cierto tiempo
            if (!mostrarRastros || iteracion % 10 === 0) {
                dibujarFondo();
            }

            // Dibujar grid
            contexto.strokeStyle = 'rgba(255, 255, 255, 0.1)';
            contexto.lineWidth = 1;
            
            const optimo = funcionesObjetivo[parametros.currentFunction].optimo;
            const limite = funcionesObjetivo[parametros.currentFunction].limite;
            const escalaX = lienzo.width / (limite * 2);
            const escalaY = lienzo.height / (limite * 2);
            
            for (let i = -limite; i <= limite; i++) {
                const x = (i + limite) * escalaX;
                const y = (i + limite) * escalaY;
                
                contexto.beginPath();
                contexto.moveTo(x, 0);
                contexto.lineTo(x, lienzo.height);
                contexto.stroke();
                
                contexto.beginPath();
                contexto.moveTo(0, y);
                contexto.lineTo(lienzo.width, y);
                contexto.stroke();
            }

            // Dibujar murci√©lagos
            for (let murcielago of murcielagos) {
                murcielago.dibujar();
            }

            // Actualizar estad√≠sticas
            actualizarEstadisticas();
        }

        // Actualizar gr√°fico de convergencia
        function actualizarGraficoConvergencia() {
            const grafico = document.getElementById('convergenceChart');
            grafico.innerHTML = '<div class="chart-line"></div>';
            
            if (historialConvergencia.length < 2) return;
            
            const maxFitness = Math.max(...historialConvergencia);
            const minFitness = Math.min(...historialConvergencia);
            const rango = maxFitness - minFitness || 1;
            
            const ancho = grafico.offsetWidth;
            const altura = grafico.offsetHeight;
            
            // Normalizar y dibujar puntos
            for (let i = 0; i < historialConvergencia.length; i++) {
                const x = (i / (historialConvergencia.length - 1)) * ancho;
                const yNormalizado = 1 - ((historialConvergencia[i] - minFitness) / rango);
                const y = yNormalizado * altura;
                
                const punto = document.createElement('div');
                punto.className = 'chart-point';
                punto.style.left = `${x}px`;
                punto.style.top = `${y}px`;
                punto.style.backgroundColor = i === historialConvergencia.length - 1 ? '#e74c3c' : '#3498db';
                punto.style.width = `${6 + (i / historialConvergencia.length * 4)}px`;
                punto.style.height = `${6 + (i / historialConvergencia.length * 4)}px`;
                grafico.appendChild(punto);
            }
        }

        // Actualizar estad√≠sticas
        function actualizarEstadisticas() {
            document.getElementById('iteration').textContent = iteracion;
            document.getElementById('bestFitness').textContent = mejorFitness.toFixed(6);
            
            const intensidadPromedio = murcielagos.reduce((suma, murcielago) => suma + murcielago.intensidad, 0) / murcielagos.length;
            document.getElementById('avgIntensity').textContent = intensidadPromedio.toFixed(3);
            
            let convergencia;
            switch(parametros.currentFunction) {
                case 'rastrigin':
                    convergencia = Math.max(0, 100 - (mejorFitness * 10));
                    break;
                case 'ackley':
                    convergencia = Math.max(0, 100 - (mejorFitness * 5));
                    break;
                case 'rosenbrock':
                    convergencia = Math.max(0, 100 - (mejorFitness / 10));
                    break;
                case 'griewank':
                    convergencia = Math.max(0, 100 - (mejorFitness * 50));
                    break;
                default: // sphere
                    convergencia = Math.max(0, 100 - (mejorFitness * 20));
            }
            document.getElementById('convergence').textContent = convergencia.toFixed(1) + '%';
        }

        // Un paso del algoritmo
        function pasoAlgoritmo() {
            // Actualizar cada murci√©lago
            for (let murcielago of murcielagos) {
                murcielago.actualizarPosicion();
            }

            // Encontrar mejor soluci√≥n
            encontrarMejorMurcielago();
            
            iteracion++;
        }

        // Bucle de animaci√≥n optimizado
        function animar(tiempo) {
            if (estaEjecutando) {
                // Limitar a ~60 FPS
                if (tiempo - tiempoUltimoFotograma >= 16) {
                    pasoAlgoritmo();
                    dibujarVisualizacion(tiempo);
                    tiempoUltimoFotograma = tiempo;
                }
                idAnimacion = requestAnimationFrame(animar);
            }
        }

        // Funciones de control
        function iniciarAnimacion() {
            if (!estaEjecutando) {
                estaEjecutando = true;
                document.getElementById('startBtn').disabled = true;
                document.getElementById('pauseBtn').disabled = false;
                tiempoUltimoFotograma = performance.now();
                animar(tiempoUltimoFotograma);
            }
        }

        function pausarAnimacion() {
            estaEjecutando = false;
            document.getElementById('startBtn').disabled = false;
            document.getElementById('pauseBtn').disabled = true;
            if (idAnimacion) {
                cancelAnimationFrame(idAnimacion);
            }
        }

        function reiniciarAnimacion() {
            pausarAnimacion();
            iteracion = 0;
            mejorFitness = Infinity;
            inicializarMurcielagos();
            dibujarVisualizacion();
        }

        function alternarRastros() {
            mostrarRastros = !mostrarRastros;
            if (!mostrarRastros) {
                for (let murcielago of murcielagos) {
                    murcielago.rastro = [];
                }
            }
            // Invalida la cach√© del mapa de calor
            cacheMapaCalor = null;
            dibujarVisualizacion();
        }

        // Actualizar par√°metros
        function actualizarParametro(nombreParametro, valor) {
            parametros[nombreParametro] = parseFloat(valor);
            document.getElementById(nombreParametro + 'Value').textContent = valor;
            
            // Actualizar par√°metros de murci√©lagos existentes
            if (nombreParametro === 'population') {
                const nuevoTamanoPoblacion = parseInt(valor);
                if (nuevoTamanoPoblacion > murcielagos.length) {
                    // Agregar murci√©lagos
                    for (let i = murcielagos.length; i < nuevoTamanoPoblacion; i++) {
                        murcielagos.push(new Murcielago());
                    }
                } else if (nuevoTamanoPoblacion < murcielagos.length) {
                    // Remover murci√©lagos
                    murcielagos = murcielagos.slice(0, nuevoTamanoPoblacion);
                }
                encontrarMejorMurcielago();
            } else {
                // Actualizar par√°metros de murci√©lagos existentes
                for (let murcielago of murcielagos) {
                    if (nombreParametro === 'intensity') {
                        murcielago.intensidad = parametros.intensity;
                    } else if (nombreParametro === 'pulseRate') {
                        murcielago.tasaPulso = parametros.pulseRate;
                    }
                }
            }
            
            // Redibujar
            dibujarVisualizacion();
        }

        // Navegaci√≥n entre secciones
        function mostrarSeccion(nombreSeccion) {
            // Ocultar todas las secciones
            const secciones = document.querySelectorAll('.section');
            secciones.forEach(seccion => {
                seccion.classList.remove('active');
            });

            // Remover clase active de todos los tabs
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });

            // Mostrar secci√≥n seleccionada
            document.getElementById(nombreSeccion).classList.add('active');
            
            // Activar tab correspondiente
            event.target.classList.add('active');

            // Si se cambia a visualizaci√≥n, reiniciar
            if (nombreSeccion === 'visualization') {
                setTimeout(() => {
                    if (lienzo) {
                        ajustarTamanoLienzo();
                        dibujarVisualizacion();
                    }
                }, 100);
            }
        }

        // Mostrar informaci√≥n del algoritmo
        function mostrarInfoAlgoritmo() {
    const funcionActual = funcionesObjetivo[parametros.currentFunction];

    const info = `
        <b>ü¶á ALGORITMO DE MURCI√âLAGOS ‚Äî INFORMACI√ìN DETALLADA</b><br><br>

        <b>üîç COMPORTAMIENTO GENERAL:</b><br>
        El algoritmo simula la eco-localizaci√≥n de los murci√©lagos para optimizaci√≥n.<br><br>

        <b>1Ô∏è‚É£ EXPLORACI√ìN GLOBAL:</b><br>
        ‚Ä¢ Vuelo aleatorio en el espacio de b√∫squeda<br>
        ‚Ä¢ Emisi√≥n de pulsos ultras√≥nicos<br>
        ‚Ä¢ Ajuste de frecuencia seg√∫n el entorno<br><br>

        <b>2Ô∏è‚É£ EXPLOTACI√ìN LOCAL:</b><br>
        ‚Ä¢ Mayor precisi√≥n al detectar una "presa"<br>
        ‚Ä¢ Reducci√≥n de amplitud de b√∫squeda<br>
        ‚Ä¢ Aumento de resoluci√≥n en la localizaci√≥n<br><br>

        <b>3Ô∏è‚É£ COMUNICACI√ìN ENTRE AGENTES:</b><br>
        ‚Ä¢ Intercambio de informaci√≥n entre murci√©lagos<br>
        ‚Ä¢ Seguimiento a los m√°s exitosos<br>
        ‚Ä¢ Ajuste din√°mico de par√°metros<br><br>

        <b>‚öôÔ∏è PAR√ÅMETROS CLAVE:</b><br>
        ‚Ä¢ <b>Frecuencia (f):</b> controla velocidad de movimiento<br>
        ‚Ä¢ <b>Intensidad (A):</b> regula la amplitud de b√∫squeda<br>
        ‚Ä¢ <b>Tasa de pulso (r):</b> define probabilidad de b√∫squeda local<br><br>

        <b>üí° VENTAJAS:</b><br>
        ‚úì Convergencia r√°pida<br>
        ‚úì Pocos par√°metros a ajustar<br>
        ‚úì Balance autom√°tico entre exploraci√≥n/explotaci√≥n<br>
        ‚úì Alta eficiencia en problemas multimodales<br><br>

        <b>üìå FUNCI√ìN ACTUAL:</b> ${funcionActual.nombre.toUpperCase()}<br>
        <b>üìç √ìPTIMO GLOBAL:</b> x = ${funcionActual.optimo.x}, y = ${funcionActual.optimo.y}<br>
        <b>üèÜ MEJOR FITNESS ACTUAL:</b> ${mejorFitness.toFixed(6)}<br>
        <b>üîÑ ITERACI√ìN:</b> ${iteracion}
    `;

    document.getElementById('modalTitle').textContent = `Algoritmo de Murci√©lagos - ${funcionActual.nombre}`;
    document.getElementById('modalContent').innerHTML = info; // <--- Aqu√≠ el cambio
    document.getElementById('infoModal').style.display = 'flex';
}

        function cerrarModal() {
            document.getElementById('infoModal').style.display = 'none';
        }

        // Exportar datos de convergencia
        function exportarDatos() {
            if (historialConvergencia.length === 0) {
                alert('No hay datos para exportar');
                return;
            }
            
            let contenidoCSV = "Iteraci√≥n,Fitness\n";
            historialConvergencia.forEach((fitness, indice) => {
                contenidoCSV += `${indice},${fitness.toFixed(6)}\n`;
            });
            
            const blob = new Blob([contenidoCSV], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const enlace = document.createElement('a');
            enlace.setAttribute('href', url);
            enlace.setAttribute('download', `convergencia_murcielagos_${parametros.currentFunction}.csv`);
            enlace.style.visibility = 'hidden';
            document.body.appendChild(enlace);
            enlace.click();
            document.body.removeChild(enlace);
        }

        // Inicializar tooltips
        function inicializarTooltips() {
            // Tooltips ya est√°n implementados en el CSS
            // Esta funci√≥n es para futuras extensiones
        }

        // Manejar redimensionamiento de la ventana
        window.addEventListener('resize', () => {
            ajustarTamanoLienzo();
            dibujarVisualizacion();
        });
    </script>
<!-- Agrega este script despu√©s de todos los dem√°s scripts --><script>
    const MIN_SECOND = 27;
    let player;

    function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
            height: '450',
            width: '800',
            videoId: 'HX3j61Nx288',
            playerVars: {
                autoplay: 1,
                start: MIN_SECOND,
                controls: 1,
                rel: 0
            },
            events: {
                onReady: onPlayerReady,
                onStateChange: onPlayerStateChange
            }
        });
    }

    function onPlayerReady(event) {
        setInterval(() => {
            const currentTime = player.getCurrentTime();
            if (currentTime < MIN_SECOND) {
                player.seekTo(MIN_SECOND, true);
            }
        }, 1000);
    }

    function onPlayerStateChange(event) {
        // Puedes implementar m√°s l√≥gica si lo deseas
    }

    // Inyectar el script de la API de YouTube
    const tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    document.body.appendChild(tag);
</script>
<!-- Aseg√∫rate que en la funci√≥n mostrarSeccion tambi√©n permitas activar esta pesta√±a -->
<script>
    function mostrarSeccion(nombreSeccion) {
        const secciones = document.querySelectorAll('.section');
        secciones.forEach(seccion => seccion.classList.remove('active'));

        const tabs = document.querySelectorAll('.nav-tab');
        tabs.forEach(tab => tab.classList.remove('active'));

        document.getElementById(nombreSeccion).classList.add('active');
        event.target.classList.add('active');

        if (nombreSeccion === 'visualization') {
            setTimeout(() => {
                if (lienzo) {
                    ajustarTamanoLienzo();
                    dibujarVisualizacion();
                }
            }, 100);
        }
    }
</script>
</body>
</html>
